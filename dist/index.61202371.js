let e=document.querySelector(".content"),t=document.querySelector(".img-block-wrapper__img"),n=document.querySelector(".img-block-wrapper__info"),o=document.querySelector(".info__year"),l=document.querySelector(".info__place"),a=document.querySelectorAll(".content-inner"),i=document.querySelectorAll(".content__buttons"),s=document.querySelectorAll(".content__buttons-button"),r=document.querySelector(".progress-bar__line-filled"),c=document.querySelector(".smiles__good"),u=document.querySelector(".smiles__bad"),d=document.querySelectorAll(".content__buttons-wrapper"),p=90/i.length,g=10,y=[{imageLink:"https://img.the-village.ru/IXZGOoCMB449ndjy_Nd02ZdXhzc_PqodPY5bHsseC9s/q:88/plain/2021/12/05/Mask-Group-2-_0.jpg",year:"2017",event:"КолАЭС"},{imageLink:"https://img.the-village.ru/eCpfdHOTmEL22tlekFBDyYcuR5kuI47rcWRPvM57UAY/q:88/plain/2021/12/05/Mask-Group-3-_0.jpg",year:"2017",event:"ИЦАЭ"},{imageLink:"https://img.the-village.ru/w-fuGhzXXCt0DtWvE8ImOwrSKfiCgTkoXfJxle86GJI/q:88/plain/2021/12/05/Mask-Group-4-_0.jpg",year:"2018",event:"ИЦАЭ ВК Фест"},{imageLink:"https://img.the-village.ru/d6lcGETd50yI9eJEcgpEwxKtAK7AKAA05d2hpNz80Lc/q:88/plain/2021/12/05/Mask-Group-5-_0.jpg",year:"2019",event:"ИЦАЭ Старкон"},{imageLink:"https://img.the-village.ru/EdoGwUo-CNCq5h6SIFLtlFMNIDDXlV7qJ0tLDkRzwnI/q:88/plain/2021/12/05/Mask-Group-6-_0.jpg",year:"2019",event:"ЯПрофи"},{imageLink:"https://img.the-village.ru/o_M8KVHEFoVUVvOLx7QYsmsvB-AaM1d07Wflhfv7ZJ0/q:88/plain/2021/12/05/Mask-Group-7-_0.jpg",year:"2020",event:"Территория смыслов"},{imageLink:"https://img.the-village.ru/Lx-AV7G2JDoQ6wEkp_9tSELB2XeJwfyzWHETvWrazJM/q:88/plain/2021/12/05/Mask-Group-8-_0.jpg",year:"2021",event:"Сириус"},{imageLink:"https://img.the-village.ru/gK5SX6li5hAmSpb6DvUS0bKLiK971PAqeucmbXGXphI/q:88/plain/2021/12/05/Mask-Group-9-.jpg",year:"2021",event:"Выпуск"}],m={},h=[];window.onload=()=>{r.style.width="10%";let e=0;a.forEach(((t,n)=>{let o=document.body.getBoundingClientRect(),l=t.getBoundingClientRect().top-o.top;t.dataset.image&&(m[e++]=l)})),d.forEach((e=>{let t=document.body.getBoundingClientRect(),n=e.getBoundingClientRect().top-t.top;h.push(n)})),console.log(h)};let b=0;function v(e){return new Promise((t=>setTimeout(t,e)))}document.addEventListener("scroll",(async()=>{let a=e.offsetTop,i=document.documentElement.scrollTop;e.style.backgroundAttachment=i>=a?"fixed":"",+i>=+Object.values(m)[b]&&i>+Object.values(m)[b+1]&&b<Object.values(m).length&&(b++,t.style.opacity="0%",n.style.opacity="0%",await v(400),t.src=y[b].imageLink,o.innerText=y[b].year,l.innerText=y[b].event,n.style.opacity="100%",t.style.opacity="100%"),+i<=+Object.values(m)[b]&&i<+Object.values(m)[b-1]&&b>0&&(b--,t.style.opacity="0%",n.style.opacity="0%",await v(400),t.src=y[b].imageLink,o.innerText=y[b].year,l.innerText=y[b].event,n.style.opacity="100%",t.style.opacity="100%")})),document.addEventListener("onmousewheel",(e=>{e.preventDefault(),console.log("mousewheel")})),s.forEach((e=>{e.addEventListener("click",(()=>{if(!e.classList.contains("selected-button")&&!e.classList.contains("disabled-button")&&!e.parentNode.parentNode.parentNode.classList.contains("blocked")){e.classList.add("selected-button"),Array.from(e.parentNode.children).forEach((e=>{e.classList.contains("selected-button")||e.classList.add("disabled-button")})),"true"===e.dataset.answer&&(g=parseInt(r.style.width),r.style.width=`${g+p}%`),async function(e,t){"true"===t?(e.style.backgroundColor="#085014",c.style.fill="#085014"):(e.style.backgroundColor="#7B0919",u.style.fill="#7B0919");await v(1e3),e.style.backgroundColor="#fff",c.style.fill="rgba(255, 255, 255, 0)",u.style.fill="rgba(255, 255, 255, 0)"}(r,e.dataset.answer);let t=!0;a.forEach(((e,n)=>{e.classList.contains("blocked")&&t&&(e.classList.remove("blocked"),Array.from(e.children).forEach((e=>{t=!e.classList.contains("content__buttons-wrapper")})))}))}}))})),a.forEach(((e,t)=>{0!==t&&e.classList.add("blocked")}));